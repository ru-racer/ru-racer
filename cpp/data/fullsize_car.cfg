# ru_racer_cpp key=value config (example full-size car parameterization)
#
# Notes:
# - This repo’s core dynamics are still the 6-state “bike” model (x,y,psi,vx,vy,r) with slip input.
# - Use this config as a starting point for full-size vehicle *scaling* and tuning.
# - If you also move to a full-scale track/map, you must update map transform + state bounds accordingly.

# Output
output_root=cpp/results
seed=1234

# Integration / model
dt=0.02
rewiring_value=0.20

# Vehicle constants (rarely change) — FULL SIZE (typical passenger car-ish defaults)
vehicle_m=1500.0
vehicle_Izz=2500.0
vehicle_lf=1.20
vehicle_lr=1.60
vehicle_h=0.50
vehicle_g=9.81

# Tire model (Magic Formula nominal parameters)
# Keep the same nominal B,C and scale peak via friction_mu_scale_*; adjust as needed.
tiref_B=10.275
tiref_C=1.56
tiref_D=-0.85
tirer_B=10.275
tirer_C=1.56
tirer_D=-0.79

# Runtime-updatable friction scaling (multiplier on tire D)
friction_mu_scale_f0=1.0
friction_mu_scale_r0=1.0
friction_mu_scale_f_min=0.4
friction_mu_scale_f_max=1.3
friction_mu_scale_r_min=0.4
friction_mu_scale_r_max=1.3

# Optional obstacles / map
# For full-scale tracks you’ll likely use a different map + transform.
# map_file=/absolute/path/to/fullscale_map.pgm
# map_use_affine=true
# map_a11=...
# map_a12=...
# map_a21=...
# map_a22=...
# map_b1=...
# map_b2=...
# map_free_threshold=0
# map_invert=false

# Start state [x y psi vx vy r]
start_x=0.0
start_y=0.01
start_psi=1.57079632679
start_vx=10.0
start_vy=0.0
start_r=0.0

# Goal state [x y psi vx vy r]
goal_x=0.0
goal_y=-0.05
goal_psi=7.85398163397
goal_vx=15.0
goal_vy=0.0
goal_r=0.0

# State bounds (sampling + feasibility)
# IMPORTANT: set x/y bounds to your full-scale track/map coordinates.
xmin_x=-200.0
xmin_y=-200.0
xmin_psi=-12.5663706144
xmin_vx=0.5
xmin_vy=-5.0
xmin_r=-2.0

xmax_x=200.0
xmax_y=200.0
xmax_psi=12.5663706144
xmax_vx=40.0
xmax_vy=5.0
xmax_r=2.0

# RRT*
algorithm=spars_rrt
type=o
max_nodes=200000
max_iterations=200000
delta_goal=3.0
max_step=2.0
delta_drain=3.0
goal_sample_rate=0.02
neighbor_gamma=1.0
neighbor_r_max=10.0

# Control bounds
delta_max=0.5235987756    # 30 deg
sfx_max=0.05              # slip command magnitude (tune to match your modeling intent)

# NMPC
run_nmpc=true
nmpc_horizon_steps=20
nmpc_max_iters=30
nmpc_step_size=0.4
nmpc_eps_fd=0.001
nmpc_control_hold_steps=5
nmpc_w_pos=1.0
nmpc_w_psi=0.3
nmpc_w_vx=0.5
nmpc_w_u=0.02

# Auto visualization
auto_visualize=true
viz_bg=track.png
viz_bg_transform=track
viz_show_start_goal=true

